#python 
import requests, json, time
from datetime import datetime, timedelta

url = 'http://192.168.1.147:8086/'
arrbrendebi = ['EVERTON','A-PLUS','ACCELERA','ACENDA','ACHILLES','ADDO INDIA','ADERENZA','ADMIRAL','ADVANCE','ADVANTA','AEOLUS','AERO CLASSIC','AGATE','AGORA','AGSTAR','ALCEED','ALLIANCE','ALLOSAURUS','ALTAIRE','ALTENZO','ALTURA','AMBERSTONE','AMERICAN CLASSIC','AMP','AMTEL','AN-TYRE','ANCHEE','ANNAITE','ANTARES','ANTEO','ANTYRE','AOSEN','AOTELI','APLUS','APOLLO','APTANY','ARCRON','ARDENT','ARDUZZA','ARESTONE','ARIVO','ARMOUR','ARMSTRONG','ARROWSPEED','ARTRAX','ARTUM','ASCENSO','ASR','ATLANDER','ATLAS','ATTURO','AUFINE','AUPLUS','AURORA','AUSTONE','AUTOGREEN','AUTOGRIP','AUTOGUARD','AVANTECH','AVATYRE','AVON','BK TRAILER','BMW','BANDAG','BANDVULC','BARKLEY','BARUM','BAR´S','BCT','BELSHINA','BENCHMARK','BERLIN TIRES','BESTDRIVE','BESTRICH','BF GOODRICH','BILLAS','BIRLA','BKT','BLACKARROW','BLACKHAWK','BLACKLION','BLACKSTAR','BLACKSTONE','BLOCKLEY','BODEGAS BORSAO','BOKA','BONTYRE','BORISTAR','BOSTONE','BOTO','BRIDGESTONE','BRILAND','BRIWAY','BUDGET','BUDGET TYRES','CACHLAND','CAMAC','CANTOP','CAPITOL','CAPTAIN','CARAMBA','CARBON SERIES','CARGOPOWER','CARLISLE','CAVALLIS','CEAT','CELIMO','CENTARA','CEPSA','CHAMPION','CHAO YANG','CHAOYANG','CHARMHOO','CHENG SHIN','CHENGSHAN','CHEYEN','CHUANSHI','CHURCHILL','CITY STAR','CLASSIC STREET TIRES','CLEAR','COINMAX','COKER','COMFORSER','COMPASAL','COMPASS','CONSTANCY','CONTINENTAL','CONTINUUM','CONTIRE','COOPER','CORDIANT','CORSA','COSMIS','CRATOS','CROSSLEADER','CROSSWIND','CST','CULTOR','DAILYWAY','DAVANTI','DAYTON','DEAN','DEBICA','DEESTONE','DEFINITY','DELFIN','DELI','DELINTE','DELIUM','DELMAX','DERUIBO','DEXTERO','DIAMONDBACK','DIPLOMAT','DMACK','DNEPROSHINA','DOLLUP','DORAL','DOUBLE COIN','DOUBLESTAR','DUNLOP','DURABLE','DURATION','DURATURN','DURO','DURUN','DYNACARGO','DYNAMO','EFX','ENDURO/RUNWAY','EP TYRES','EFFIPLUS','ELDORADO','ENCORE NEW','ENSIGN','ESA+TECAR','ESKAY TYRES','ETERNITY','EURO TYFOON','EURO-GRIP','EUROREPAR','EUROTYRE','EUZKADI','EVENT','EVERGREEN','EVERMAX','EVERSHINE','EXCELON','EXCELSIOR','FALKEN','FARALONG','FARM KING','FARROAD','FATE','FEDERAL','FEDIMA','FELGENBAND','FERTAN','FESITE','FEU VERT','FINALIST','FINIXX','FIREMAX','FIRENZA','FIRESTONE','FIRSTSTOP','FLOURISH','FORCEUM','FORD','FORMULA','FORMULA EAL','FORTUNA','FORTUNE','FRIDERIC','FRONWAY','FULDA','FULL BORE USA','FULLRUN','FULLWAY','FUNTOMA','FUZION','G-STONE','GENERAL','GALAXY','GALLANT','GAZELLE','GENCOTIRE','GERUTTI','GINELL','GISLAVED','GITI','GLADIATOR','GLADSTONE','GM ROVER','GOALSTAR','GOFORM','GOLDEN BRIDGE','GOLDEN CROWN','GOLDEN TYRE','GOLDENTYRE','GOLDLINE','GOLDSPEED','GOLDWAY','GOODRIDE','GOODTRIP','GOODYEAR','GOPRO','GOWIND','GR EXCAVATOR','GREENLANDER','GREENMAX','GREENTOUR','GREENTRAC','GREMAX','GRENLANDER','GRIPMAX','GRIPOWER','GT RADIAL','GTK','HABILEAD','HAIDA','HANKOOK','HATOX','HEADWAY','HEIDENAU','HELLAS','HEMISPHERE','HERCULES','HERO','HEROVIC','HIFLY','HIGH PERFORMER','HIGH PLUS','HIGHPLUS','HILO','HONOUR','HOOSIER','HORIZON','HUASHENG','ITP','IDILIS','ILINK','IMPERIAL','IMPORT','INDUS','INFINITY','INNING','INNOVA','INNOVA TIRE','INSA TURBO','INTERSTATE','INTERTRAC','INVOVIC','IRC','IRIS','IRONMAN','JINYU','JKTYRE','JOURNEY','JOYROAD','KS TOOLS','KABAT','KAMA','KAMA EURO','KAMA TYRES','KAMA-KIPOR','KAPSEN','KELLY','KELLY TIRES','KENDA','KENEX','KETER','KHEFREN','KINFOREST','KING MEILER','KING-MEILER','KINGBOSS','KINGPIN','KINGRUN','KINGS TIRE','KINGS TYRE','KINGSTAR','KLEBER','KONTIO','KORMORAN','KORYO','KORYOMAX','KPATOS','KREISTA','KRM','KUMHO','KUMKANG','KYOTO','LH','LAND GOLDEN','LANDER','LANDSAIL','LANDSPIDER','LANVIGATOR','LANWOO','LANWOOD','LASSA','LAUFENN','LEAO','LENSTON','LEVORIN','LEXANI','LEXANI TIRE','LINGLONG','LODGE','LONGMARCH','LONGYUE','LUCCINI','LUCKYEAR','LUCKYLAND','LUISTONE','LUXXAN','M96D','MABOR','MAGNA','MALATESTA','MALOYA','MARANGONI','MARCHER','MARIX','MARSHAL','MASSIMO','MASTERCRAFT','MASTERSTEEL','MATADOR','MATHY','MATHÉ','MATRAX','MAXAM','MAXEN','MAXFIELD','MAXIMA','MAXIMO','MAXSPORT','MAXSTAR','MAXTREK','MAXXIS','MAYRUN','MAZZINI','MEMBAT','MENTOR','MERIT','MESHILINE','METEOR','MICHELIN','MICHELIN COLLECTION','MICHELIN ENCORE','MICKEY THOMPSON','MIDAS','MILEKING','MILEMORE','MILESTAR','MILESTONE','MILESTONE TYRES','MINERVA','MINERVA TYRES','MINNELL','MIRAGE','MIRAGE TYRES','MITAS','MOFIN','MOHAWK','MOMO','MOMO TIRES','MOTO X-TREME','MOTRIO','MRF','MRL','MULTI-MILE','MULTIRAC','MULTISTAR','NAMA','NANKANG','NARUBB','NEOLIN','NEOTERRA','NEREUS','NEUTON','NEXEN','NEXEN TIRE','NEXT TREAD','NIKA','NITTO','NITTO TIRE','NOBLE','NOKIAN','NORAUTO','NORDEXX','NORDMAN','NORTENHA','NOVEX','NOVEX TYRES','NOVIO','OBOR','ODYKING','OMNI','ONYX','OPALS','ORIUM','ORIUM TYRES','ORNET','OTANI','OVATION','OVATION TYRE','OZKA','PAXARO','PACE','PACE TYRES','PANTERA','PATRIOT','PERMANENT','PHAROS','PHOENIX','PHYRON','PINSO','PIRELLI','PLATIN','PNEUMANT','POINT S','POINTS','POWER TRAC','POWERMAXX','POWERTRAC','PREMIORRI','PREMIORRI TYRES','PREMME','PRESA','PRESA TIRES','PRESTIVO','PRESTONE','PRIMEWELL','PRINX','PROFIL','PROTECTOR','PROTREAD','PROVATO','RACEALONE','RADAR','RADBURG','RAGGIORI','RAPID','RAPID TYRES','RECAMIC','RETRO','RHINO','RIGDON','RIKEN','ROADCLAW','ROADCRUZA','ROADGUIDER','ROADHOG','ROADKING','ROADLUX','ROADMARCH','ROADMAX','ROADON','ROADSHINE','ROADSTONE','ROADSTONE TYRE','ROADSUN','ROADX','ROCKBLADE','ROCKSTAR','ROCKSTONE','ROSAVA','ROTALLA','ROTEX','ROUNDIA','ROUTEWAY','ROVELO','ROYAL','ROYAL BLACK','RUNWAY','RYDANZ','SUPERIA TIRES','SAETTA','SAFERICH','SAFFIRO','SAGITAR','SAILUN','SAILWIN','SAMSON','SANFENG TYRE','SANOX','SATOYA','SAVA','SEBRING','SECURITY','SECURITY TYRES','SEHA','SEIBERLING','SELENIA','SEMI-PRO','SEMPERIT','SENTURY','SHELL','SHIKARI','SHINKO','SIERRA','SILVERSTONE','SIMEX','SIMEX TYRES','SKYFIRE','SOLINO','SONAR','SONAR TYRES','SONAX','SOUTHERN','SPECIAL TUBES','SPEEDWAYS','SPLENDID','SPORTIVA','SPORTRAK','STAR','STAR PERFORMER','STARCO','STARFIRE','STARMAXX','STARPERFORMER','STARSAIL','STOMIL','STRADA','STRIAL','SUMAXX','SUMITOMO','SUMITOMO TIRE','SUN-F','SUNEW','SUNFULL','SUNFULL TYRES','SUNITRAC','SUNNY','SUNNY TYRES','SUNOTE','SUNTEK','SUNWIDE','SUPER KING','SUPERIA','SUPERK','SUPERKING','SUPERSPROX','SURETRAC','SWALLOW','SYRON','SYRON TIRES','T BY ZENISES','T-TYRE','T-BRAND','TAIFA','TAISHAN','TALON','TAUROPOWER','TAURUS','TECHKING','TECNICA','TEFEE','TEKPRO','TELSTAR','THREE-A','THUNDERER','TIANFU','TIANLI','TIANLI TYRE','TIGAR','TIMBERLAND','TIRON','TOEE','TOKAI','TOLEDO','TOLEDO TYRES','TOMASOM','TOMASON','TOMKET','TORQUE','TOTAL','TOURADOR','TOURADOR TYRE','TOWNHALL','TOYO','TRACMAX','TRAYAL','TRAZANO','TREADWRIGHT','TRELLEBORG','TRI-ACE','TRIANGLE','TRIANGLETIRE','TRISTAR','TRISTAR PRODUCTS','TRISTAR TYRE','TRISTAR TYRES','TROTTAR','TUTELA','TVS','TYFOON','ULTRAMILE','UNIGLORY','UNIGRIP','UNIROYAL','URANIA','V-NETIK','V-PLUS','VALUE CHOICE','VEE RUBBER','VEERUBBER','VELOCE','VELOCITY','VENEZIA','VERSATYRE','VIATTI','VICTORUN','VIKING','VINMAX','VITORA','VITOUR','VITOUR TIRES','VIZZONI','VN MASTER','VOGUE','VOLCATO','VOLTYRE','VOYAGER','VREDESTEIN','WANDA','WANDA TYRE','WANLI','WATERFALL','WAYMASTER','WD-VELOCITY','WEARWELL','WEST LAKE','WESTLAKE','WHEELWORLD','WIDEWAY','WINDA','WINDFORCE','WINDPOWER','WINMAX','WINRUN','WINTER TACT','WOLF TYRES','WOLFSBURG','WOSEN','XBRI','XCENT','YARTU','YATONE','YEADA','YINBAO','YOKOHAMA','YONKING','Z TYRE','ZEETEX','ZEKNOVA','ZENISES','ZENNA','ZESTINO','ZETA','ZETA TYRES','ZETUM','ZIARELLI','ZIGGURAT','ZMAX','ANSU','ARMOR','BANOZE','BEARWAY','BERLINER-HEISSRUNDERNEUERUNG','BFGOODRICH','BK-TRAILER','BLACK-BEAR','DURAMAN','EGY-STONE','ENSO','EUROPEAN-CLASSIC','FARRIDE','FEIYUE','FORWARD','FREETOUR','FRIEZZA','FRIGUS-EV','GENERAL-TIRE','HAIDA-TYRES','HAKUBA','HALFORDS','HUSQVARNA','KUSTONE','LANCASTER','LODER','MEFO-SPORT','MONSTA','NAAATS','NEXEN-TIRE','NITTO-TIRE','NORTEC','PALLYKING','PEARLY','ROADBOSS','SAPPHIRE','SILVERLINE-GARDEN','SONIX','SUPERWAY','TBB','TRANSMATE','ULTRA','VAKAYAMA','VALINO','VITTOS']
arrzomebi = ['165/70R10','135/80R12','135/70R12','145/80R12','145/70R12','155/80R12','155/75R12','155/70R12','165/70R12','165/60R12','125/80R13','135/80R13','135/70R13','145/80R13','145/70R13','145/65R13','145/60R13','155/80R13','155/75R13','155/70R13','155/65R13','155/60R13','165/80R13','165/70R13','165/65R13','165/60R13','165/55R13','175/80R13','175/75R13','175/70R13','175/65R13','175/60R13','175/50R13','185/80R13','185/75R13','185/70R13','185/65R13','185/60R13','185/55R13','190/55R13','195/70R13','205/70R13','205/65R13','205/60R13','145/80R14','155/80R14','155/70R14','155/65R14','155/60R14','155/55R14','165/80R14','165/75R14','165/70R14','165/65R14','165/60R14','165/55R14','165/50R14','170/65R14','175/80R14','175/75R14','175/70R14','175/65R14','175/60R14','175/50R14','185/80R14','185/75R14','185/70R14','185/65R14','185/60R14','185/55R14','185/50R14','195/80R14','195/75R14','195/70R14','195/65R14','195/60R14','195/55R14','205/80R14','205/75R14','205/70R14','205/65R14','205/60R14','205/55R14','215/80R14','215/75R14','215/70R14','215/65R14','215/60R14','225/75R14','225/70R14','225/60R14','235/60R14','265/60R14','135/70R15','145/65R15','155/80R15','155/70R15','155/65R15','155/60R15','165/80R15','165/70R15','165/65R15','165/60R15','165/55R15','165/50R15','165/45R15','175/80R15','175/70R15','175/65R15','175/60R15','175/55R15','175/50R15','185/80R15','185/75R15','185/70R15','185/65R15','185/60R15','185/55R15','185/50R15','185/45R15','190/65R15','190/55R15','195/80R15','195/75R15','195/70R15','195/65R15','195/60R15','195/55R15','195/50R15','195/45R15','205/80R15','205/75R15','205/70R15','205/65R15','205/60R15','205/55R15','205/50R15','205/45R15','215/80R15','215/75R15','215/70R15','215/65R15','215/60R15','215/50R15','220/65R15','225/80R15','225/75R15','225/70R15','225/65R15','225/60R15','225/55R15','225/50R15','225/45R15','235/80R15','235/75R15','235/70R15','235/65R15','235/60R15','245/75R15','245/70R15','245/60R15','255/75R15','255/70R15','255/60R15','265/75R15','265/70R15','275/60R15','275/55R15','115/80R16','165/50R16','165/45R16','175/80R16','175/65R16','175/60R16','175/55R16','175/50R16','185/85R16','185/75R16','185/70R16','185/65R16','185/60R16','185/55R16','185/50R16','195/75R16','195/70R16','195/65R16','195/60R16','195/55R16','195/50R16','195/45R16','195/40R16','205/80R16','205/75R16','205/70R16','205/65R16','205/60R16','205/55R16','205/50R16','205/45R16','205/40R16','215/85R16','215/80R16','215/75R16','215/70R16','215/65R16','215/60R16','215/55R16','215/50R16','215/45R16','215/40R16','225/95R16','225/75R16','225/70R16','225/65R16','225/60R16','225/55R16','225/50R16','225/45R16','225/40R16','235/85R16','235/80R16','235/75R16','235/70R16','235/65R16','235/60R16','235/55R16','235/50R16','245/75R16','245/70R16','245/65R16','245/60R16','245/55R16','245/50R16','255/70R16','255/65R16','255/60R16','255/55R16','255/50R16','265/75R16','265/70R16','265/65R16','275/70R16','275/60R16','285/70R16','285/55R16','215/85R16.5','235/85R16.5','135/50R17','175/65R17','175/55R17','185/50R17','185/45R17','195/60R17','195/55R17','195/50R17','195/45R17','195/40R17','205/70R17','205/65R17','205/60R17','205/55R17','205/50R17','205/45R17','205/40R17','215/70R17','215/65R17','215/60R17','215/55R17','215/50R17','215/45R17','215/40R17','215/35R17','225/70R17','225/65R17','225/60R17','225/55R17','225/50R17','225/45R17','225/40R17','225/35R17','235/80R17','235/75R17','235/70R17','235/65R17','235/60R17','235/55R17','235/50R17','235/45R17','235/40R17','245/75R17','245/70R17','245/65R17','245/60R17','245/55R17','245/50R17','245/45R17','245/40R17','245/35R17','255/75R17','255/70R17','255/65R17','255/60R17','255/55R17','255/50R17','255/45R17','255/40R17','265/70R17','265/65R17','265/60R17','265/55R17','265/40R17','275/70R17','275/65R17','275/60R17','275/55R17','275/45R17','275/40R17','285/70R17','285/65R17','315/70R17','175/60R18','195/60R18','195/50R18','205/60R18','205/55R18','205/50R18','205/45R18','205/40R18','205/35R18','215/85R18','215/65R18','215/60R18','215/55R18','215/50R18','215/45R18','215/40R18','215/35R18','225/65R18','225/60R18','225/55R18','225/50R18','225/45R18','225/40R18','225/35R18','235/65R18','235/60R18','235/55R18','235/50R18','235/45R18','235/40R18','235/35R18','245/75R18','245/70R18','245/65R18','245/60R18','245/55R18','245/50R18','245/45R18','245/40R18','245/35R18','255/70R18','255/65R18','255/60R18','255/55R18','255/50R18','255/45R18','255/40R18','255/35R18','265/70R18','265/65R18','265/60R18','265/55R18','265/50R18','265/45R18','265/40R18','265/35R18','275/70R18','275/65R18','275/60R18','275/55R18','275/40R18','275/35R18','285/65R18','285/60R18','285/55R18','285/50R18','285/45R18','285/30R18','295/30R18','305/60R18','315/30R18','155/70R19','195/55R19','195/50R19','205/55R19','215/50R19','215/35R19','225/55R19','225/50R19','225/45R19','225/40R19','225/35R19','235/65R19','235/60R19','235/55R19','235/50R19','235/45R19','235/40R19','235/35R19','235/30R19','245/55R19','245/50R19','245/45R19','245/40R19','245/35R19','245/30R19','255/65R19','255/60R19','255/55R19','255/50R19','255/45R19','255/40R19','255/35R19','255/30R19','265/60R19','265/55R19','265/50R19','265/45R19','265/40R19','265/35R19','265/30R19','275/55R19','275/50R19','275/45R19','275/40R19','275/35R19','275/30R19','285/55R19','285/45R19','285/35R19','285/30R19','295/45R19','295/35R19','305/30R19','245/70R19.5','155/60R20','175/55R20','195/55R20','195/50R20','215/45R20','225/45R20','225/40R20','225/35R20','225/30R20','235/60R20','235/55R20','235/50R20','235/45R20','235/40R20','235/35R20','235/30R20','245/60R20','245/50R20','245/45R20','245/40R20','245/35R20','245/30R20','255/60R20','255/55R20','255/50R20','255/45R20','255/40R20','255/35R20','255/30R20','265/60R20','265/55R20','265/50R20','265/45R20','265/40R20','265/35R20','265/30R20','265/25R20','275/65R20','275/60R20','275/55R20','275/50R20','275/45R20','275/40R20','275/35R20','275/30R20','275/25R20','285/65R20','285/60R20','285/55R20','285/50R20','285/45R20','285/40R20','285/35R20','285/30R20','285/25R20','295/50R20','295/45R20','295/40R20','305/55R20','305/45R20','305/35R20','305/30R20','315/40R20','225/45R21','235/50R21','235/45R21','245/45R21','245/40R21','245/35R21','245/30R21','255/50R21','255/45R21','255/40R21','255/35R21','255/30R21','265/50R21','265/45R21','265/40R21','265/35R21','265/30R21','275/55R21','275/50R21','275/45R21','275/40R21','275/35R21','275/30R21','275/25R21','285/45R21','285/40R21','285/35R21','285/30R21','295/40R21','295/35R21','255/45R22','255/40R22','255/35R22','255/30R22','265/50R22','265/40R22','265/35R22','265/30R22','275/50R22','275/45R22','275/40R22','275/35R22','275/30R22','285/45R22','285/40R22','285/35R22','285/30R22','285/25R22','295/40R22','295/35R22','295/30R22','305/45R22','305/40R22','305/35R22','305/30R22','325/55R22','325/50R22','255/40R23','275/35R23','285/40R23','285/35R23','295/35R23','285/35R24','295/35R24','295/30R24','305/35R24','LT145/80R12','LT155/80R12','LT135/80R13','LT145/80R13','LT155/70R13','LT165/70R13','LT155/80R14','LT165/80R14','LT165/70R14','LT175/80R14','LT175/75R14','LT175/70R14','LT175/65R14','LT185/80R14','LT185/75R14','LT185/65R14','LT195/80R14','LT195/75R14','LT195/70R14','LT205/75R14','LT215/75R14','LT185/75R15','LT185/65R15','LT195/80R15','LT195/70R15','LT205/80R15','LT205/70R15','LT205/65R15','LT215/90R15','LT215/75R15','LT215/70R15','LT215/65R15','LT225/75R15','LT225/70R15','LT235/75R15','LT255/70R15','LT175/80R16','LT185/75R16','LT195/75R16','LT195/65R16','LT195/60R16','LT205/75R16','LT205/70R16','LT205/65R16','LT205/60R16','LT205/55R16','LT215/85R16','LT215/80R16','LT215/75R16','LT215/70R16','LT215/65R16','LT215/60R16','LT225/75R16','LT225/70R16','LT225/65R16','LT225/60R16','LT235/85R16','LT235/75R16','LT235/70R16','LT235/65R16','LT245/75R16','LT245/70R16','LT265/75R16','LT265/70R16','LT285/75R16','LT215/60R17','LT225/75R17','LT225/55R17','LT235/80R17','LT235/60R17','LT235/55R17','LT245/75R17','LT245/70R17','LT255/75R17','LT255/70R17','LT255/65R17','LT265/70R17','LT265/65R17','LT275/65R17','LT285/70R17','LT315/70R17','LT215/75R17.5','LT225/80R17.5','LT255/70R18','LT255/65R18','LT265/70R18','LT265/65R18','LT265/60R18','LT275/70R18','LT275/65R18','LT275/60R18','LT285/75R18','LT305/70R18','LT325/65R18','LT245/70R19','LT255/65R19','LT225/70R19.5','LT245/70R19.5','LT245/45R20','LT265/60R20','LT275/65R20','LT275/55R20','LT285/65R20','LT285/60R20','LT305/55R20','LT285/45R22','LT305/55R22','LT305/45R22','LT275/50R24','31x10.50R15LT','30x10.50R15LT','28x9.00R15LT','30x9.50R15LT','31x10.50R16LT','37x12.50R16.5LT','37x12.50R17LT','34x12.50R17LT','37x13.50R17LT','37x12.50R17.5LT','37x12.50R18LT','34x12.50R18LT','38x13.50R18LT','37x13.50R18LT','37x13.00R19LT','38x13.50R19LT','38x13.50R20LT','37x13.50R20LT','35x13.50R20LT','38x14.00R20LT','37x13.00R22LT','37x13.50R22LT','38x14.00R22LT','35x14.00R22LT','5.00R10LT','5.20R10LT','4.50R12LT','5.00R12LT','5.95R12LT','6.00R12LT','5.50R13LT','6.00R13LT','6.15R13LT','6.45R13LT','6.00R14LT','6.40R14LT','6.45R14LT','6.50R14LT','6.70R14LT','7.00R14LT','8.00R14LT','8.55R14LT','10.00R15LT','5.60R15LT','6.40R15LT','6.50R15LT','6.70R15LT','7.00R15LT','7.35R15LT','7.60R15LT','7.75R15LT','8.25R15LT','8.55R15LT','8.85R15LT','9.00R15LT','9.15R15LT','6.00R16LT','6.50R16LT','7.00R16LT','7.50R16LT','8.00R16LT','8.75R16LT','10.00R16.5LT','7.50R16.5LT','8.00R16.5LT','8.75R16.5LT','9.50R16.5LT','9.75R16.5LT']
def auth():
    data = {'login': 'NewAutoTires','password':'Hgft^53g)'}
    header = {"Content-Type": "application/json"}
    x = requests.post(url+'api/authentication/authenticate', data=json.dumps(data), headers=header)
    x = json.loads(x.content)
    if 'ex' in x:
        return x['token']
    else:
        return "Error"
    
def geproduct(token,date):
    header = {"Content-Type": "application/json","Authorization":"Bearer "+token}
    x = requests.get(url+'api/operation/getProductsAfter/'+date, headers=header)
    x = json.loads(x.content)
    return x['products']

def geprice(token,id,tdate):
    data = {'prods': [id],'date':tdate}
    header = {"Content-Type": "application/json","Authorization":"Bearer "+token}
    x = requests.post(url+'api/operation/getProductsSelfCost', data=json.dumps(data), headers=header)
    x = json.loads(x.content)
    pasuxi = 0
    if 'ex' in x:
        for a in x['cost_info']:
            pasuxi = a['cost']
    return pasuxi

def sendtoNEWAUTO(data):
    header = {"Content-Type": "application/x-www-form-urlencoded"}
    x = requests.post('https://newauto.space/b1df24h.php', data=data, headers=header)
    return x.content.decode('UTF-8')


finish = datetime.now().strftime('%H:%M:%S')
finish_token = datetime.now().strftime('%H:%M:%S')
token = 'eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYmYiOjE3MTkwNDA5NzQsImV4cCI6MTcxOTE3MDU3NCwiaWF0IjoxNzE5MDQwOTc0LCJpc3MiOiJGSU5BIEwudC5kIiwiYXVkIjoibmV3IGF1dG8gdGlyZSJ9.DLuDRSTV1tnZvTlC6UvLKLBpE80t5dvIRQzJquvheZRsnOBXSr1HB-rFWsdjZxJBo7sGHAVT8HmU2bB2mfe6Qw'

while True:
    time_now = datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    
    if (time_now >= finish): # აქ ეხვევა ქრონ ჯობი
        print("Time Now: "+time_now)

        # აქ ნახლდება ტოკენი
        if (time_now >= finish_token):
            token = auth()
            print('\t Token updated '+token)
            finish_token = (datetime.strptime(datetime.now().strftime('%Y-%m-%d %H:%M:%S'), "%Y-%m-%d %H:%M:%S") + timedelta(hours = 23)).strftime('%Y-%m-%d %H:%M:%S')

        # მიიღებს განახლებულ ინფორმაციას არსებობის შემთხვევაში და მიგზავნის საიტზე
        dateforfetchfrom = datetime.now().strftime('%Y-%m-%d')+"T"+(datetime.strptime(datetime.now().strftime('%H:%M:%S'), "%H:%M:%S") - timedelta(hours = 6)).strftime('%H:%M:%S') # სატესტო თარიღი 2024-06-2T10:37:34
        print("\tLet's see somthing new: "+dateforfetchfrom)
        checkdata = geproduct(token,dateforfetchfrom)
        if (len(checkdata) > 0):
            for a in checkdata:
                if a['group_id'] == 11:
                    brendi = "ROADMARCH"
                    zoma = "001/01R01"
                    for b in arrbrendebi:
                        if b.lower() in str(a['name']).lower():
                            brendi = b.strip()
                    for z in str(a['name']).replace("5 R","R").replace("0 R","R").split():
                        if z[:3].isdigit() and z[3:4] == '/' or z[2:5].isdigit() and z[5:6] == '/' or z[1:4].isdigit() and z[4:5] == '/' or z[:2].isdigit() and (z[2:3] == '*' or z[2:3] == 'x' or z[2:3] == '×' or z[2:3] == 'X'):
                            if '/' in z and 'R' in z:
                                if '-' in z:
                                    z = z.split('-')[0]
                                zoma = z
                            elif '×' in z or 'X' in z or 'x' in z or '*' in z or '.' in z and 'R' in z:
                                if '-' in z:
                                    z = z.split('-')[0]
                                zoma = z
                    try:
                        senddata = sendtoNEWAUTO([('prid',str(a['id']).strip()),('name',str(a['name']).strip().replace("  "," ").replace("საბურავი.","").replace("საბურ.","").replace("საბ.","").replace("საბურავი ","").replace("საბურ ","").replace("საბ ","").replace("საბურავი","").replace("საბურ","").replace("საბ","")),('code',str(a['code']).strip()),('id_group',str(a['group_id']).strip()),('import_date',datetime.now().strftime('%Y-%m-%d %H:%M:%S')),('selfcost',geprice(token,int(a['id']),time_now)),('zoma',zoma),('brendi',brendi)])
                        if senddata == 'C200':
                            print('\t\tGood '+str(a['id']))
                        else:
                            print('\t\tNope '+str(a['id']))
                            time.sleep(10)
                            senddata = sendtoNEWAUTO([('prid',str(a['id']).strip()),('name',str(a['name']).strip().replace("  "," ").replace("საბურავი.","").replace("საბურ.","").replace("საბ.","").replace("საბურავი ","").replace("საბურ ","").replace("საბ ","").replace("საბურავი","").replace("საბურ","").replace("საბ","")),('code',str(a['code']).strip()),('id_group',str(a['group_id']).strip()),('import_date',datetime.now().strftime('%Y-%m-%d %H:%M:%S')),('selfcost',geprice(token,int(a['id']),time_now)),('zoma',zoma),('brendi',brendi)])
                            if senddata == 'C200':
                                print('\t\t\tGood '+str(a['id']))
                            else:
                                print('\t\t\tNope '+str(a['id']))
                    except:
                        time.sleep(20)
                        senddata = sendtoNEWAUTO([('prid',str(a['id']).strip()),('name',str(a['name']).strip().replace("საბურავი.","").replace("საბურ.","").replace("საბ.","").replace("საბურავი","").replace("საბურ","").replace("საბ","")),('code',str(a['code']).strip()),('id_group',str(a['group_id']).strip()),('import_date',datetime.now().strftime('%Y-%m-%d %H:%M:%S')),('selfcost',geprice(token,int(a['id']),time_now)),('zoma',zoma),('brendi',brendi)])
                        if senddata == 'C200':
                            print('\t\tGood '+str(a['id']))
                        else:
                            print('\t\tNope '+str(a['id']))
        else:
            print('\t\tNothing')
        finish = (datetime.strptime(datetime.now().strftime('%Y-%m-%d %H:%M:%S'), "%Y-%m-%d %H:%M:%S") + timedelta(hours = 1)).strftime('%Y-%m-%d %H:%M:%S')

        # ძილი რომ WHILE ლუპმა კომპიუტერი არ გადატვირთოს
        print(" Next Update: "+finish," Next Token Update: "+finish_token)
    else:
        time.sleep(3600)
